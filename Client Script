function onChange(control, oldValue, newValue, isLoading, isTemplate) {
    if (isLoading || newValue == '') {
        return;
    }
    
    // Call the function to update u_critical_application_risk
    updateCriticalApplicationRisk();
}

function updateCriticalApplicationRisk() {
    // Get current values
    var sox = g_form.getValue('u_sox'); // "Yes" or "No"
    var glba = g_form.getValue('u_glba'); // 0 = No, anything else = Yes
    var sensitive = g_form.getValue('u_sensitive'); // 0 = No, anything else = Yes
    var sensitiveCommercial = g_form.getValue('u_sensitive_commerical'); // 0 = No, anything else = Yes
    
    // Convert to boolean for easier logic
    var soxYes = (sox == 'Yes');
    var glbaYes = (glba != '0' && glba != '' && glba != null);
    var sensitiveYes = (sensitive != '0' && sensitive != '' && sensitive != null);
    var sensitiveCommercialYes = (sensitiveCommercial != '0' && sensitiveCommercial != '' && sensitiveCommercial != null);
    
    // Determine the value for u_critical_application_risk
    var newValue;
    
    // If all fields are No, set to No
    if (!soxYes && !glbaYes && !sensitiveYes && !sensitiveCommercialYes) {
        newValue = 'No';
    }
    // If any of GLBA, Sensitive, or Sensitive Commercial is Yes, set to YesRBAC
    else if (glbaYes || sensitiveYes || sensitiveCommercialYes) {
        newValue = 'YesRBAC';
    }
    // Otherwise (only SOX is Yes), set to Yes
    else if (soxYes) {
        newValue = 'Yes';
    }
    
    // Update the field if the value changed
    var currentValue = g_form.getValue('u_critical_application_risk');
    if (currentValue != newValue) {
        g_form.setValue('u_critical_application_risk', newValue);
    }
}
